# MSXカセットテープインターフェース
## コネクタ（ケーブル側）
```
    -----
   /     \
  / 6   7 \
 | 1  8  3 |
  \ 4   5 /
   \  2  /
    -----
```
## ピン配置

|ピン番号|I/O|名前|詳細|
|:-:|:-:|:-:|:-|
|1|-|GND|SAVEとLOADに共通のGND|
|2|-|GND|SAVEとLOADに共通のGND|
|3|-|GND|SAVEとLOADに共通のGND|
|4|I|SAVE端子|MSXからテープへの音声|
|5|O|LOAD端子|テープからMSXへの音声|
|6|O|REMOTE+|?|
|7|O|REMOTE-|?|
|8|GND|SAVEとLOADに共通のGND|

## ボーレート
|ボーレート[bps]|特徴|
|:-:|:--|
|1200|低スピード・高信頼|
|2400|高スピード・低信頼|

## １ビット
|ボーレット[bps]|ビット|波形|説明|
|:-:|:-:|:-|:-:|
|1200|0|\_\_\_\_----|1200Hz x 1wave|
||1|\_\_--\_\_--|2400Hz x 2wave|
|2400|0|\_\_--|2400Hz x 1wave|
||1|\_-\_-|4800Hz x 2wave|

## １バイト
```
        LSB                             MSB
...| 0 | X | X | X | X | X | X | X | X | X | 1 | 1 |...
   \__/\__________________________________/\______/
Startbit           1Byte Data              Stop bit
```

## ヘッダ
|ボーレット[bps]|ヘッダ種類|詳細|時間|
|:-:|:-:|:-:|:-:|
|1200|ロング|2400Hz x 16000wave|約6.7秒|
||ショート|2400Hz x 4000wave|約1.7秒|
|2400|ロング|4800Hz x 32000wave|約6.7秒|
||ショート|4800Hz x 8000wave|約1.7秒|

## ファイルフォーマット
### BASICテキストファイル
CSAVEやCLOADで、バイナリセーブorバイナリロードされる、BASICプログラム

|内容|長さ|備考|
|:-|:-:|:-:|
|ロングヘッダ|6.7秒||
|0xD3h * 10|10byte||
|ファイル名|6byte|6byte未満時、残りはスペース(0x20h)？|
||?|無音(Blank Area)|
|ショートヘッダ|1.7秒||
|BASICプログラム|任意|プログラムの長さによる|
|0x00h * 7|7byte||

### ASCIIテキストファイル
SAVEやLOADで、アスキーセーブorアスキーロードされる、BASICプログラム

|内容||長さ|備考|
|:-|:-:|:-:|:-:|
|ロングヘッダ||6.7秒||
|0xEAh * 10||10byte||
|ファイル名||6byte|6byte未満時、残りはスペース(0x20h)？|
||?|無音(Blank Area)|
|ブロック１|ショートヘッダ|1.7秒||
||データ１|256byte||
|ブロック２|ショートヘッダ|1.7秒||
||データ２|256byte||
|ブロック３|ショートヘッダ|1.7秒||
||データ３|256byte||
||：|||
|最終ブロック|ショートヘッダ|1.7秒||
||データＮ|？byte|0x1Ah(Ctrl+Z = EOF)検出時に終了？|

```
0x1Ahを含むデータファイルは作れない
```

### マシン語ファイル
BSAVEやBLOADでセーブorロードされる、マシン語ファイル

|内容|長さ|備考|
|:-|:-:|:-:|
|ロングヘッダ|6.7秒||
|0xD0h * 10|10byte||
|ファイル名|6byte|6byte未満時、残りはスペース(0x20h)？|
||?|無音(Blank Area)|
|ショートヘッダ|1.7秒||
|先頭アドレス|2byte|プログラムの最初のアドレス|
|最終アドレス|2byte|プログラムの最後のアドレス|
|開始アドレス|2byte|実行開始されるアドレス(BLOADでRオプション時のみ有効)|
|プログラム本体|最終アドレスー開始アドレス＋１byte||

## 参照

[２章カセット・インターフェースーテクハンwiki](http://ngs.no.coocan.jp/doc/wiki.cgi/TechHan?page=2%BE%CF+%A5%AB%A5%BB%A5%C3%A5%C8%8E%A5%A5%A4%A5%F3%A5%BF%A1%BC%A5%D5%A5%A7%A5%A4%A5%B9)

[piroyan's Lablog:カセットインターフェースの製作](http://lablog.piroyan.com/index.php?e=24)
